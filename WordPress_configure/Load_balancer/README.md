# 2 экземпляра Apache веб-сервер и NGINX в качестве балансировщика с терминацией SSL

1. Запуск apache с сайтом который показывает IP адрес текущей машины(функцией) на 80 порту (простая html страница с PHP кодом)

2. Копирование этой конфигурации и index.php на ещё 1 виртуальную машину.

3. На 3-ем сервере запущен nginx на которой будет балансировщик нагрузки, случайным образом распределяющий запросы между 2мя nginx выше. порт так же 80.

4. Добавил на nginx терминацию ssl, так чтобы балансироващик работал на 443 и одавал клиенту https, а nginx с сайтами все ещё работал на 80.
   
5. На одну из серверов установил mysql и сделал reverse proxy с nginx на эту машину, то есть обращаясь по адресу балансировщика должен получить доступ к mysql.

6. Cлучайное распределение запросов между 2мя веб-серверами, изменено на взвешенную балансировку 9/1, 3/1, 1/1.

Проверка 
```bash
for i in {1..100}; do curl http://siteip.com | grep 192; done >> test2.txt
cat test2.txt | grep 20 | wc
```
